
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Manage proxy</title>
<style type="text/css">
.left {
	float: left;
	width: 210px;
}

.middle {
	float: none;
}

.right {
	float: right;
}

.table {
	width: 450px;
}
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">    
	$(document).ready(function() {		
		$('#submitbtn').click(function(){			
			$.ajax({
				     url:'/addressmap/'+$('#from').val()+'/'+$('#to').val(),
				     type: 'PUT',
				     error:  function (xhr, ajaxOptions, thrownError) {				         
				         alert('Failed due to:'+ thrownError);
				       }
				   }).done(function(mappings){showMappings(mappings);});
		});
		//load original mappings
	
		$.ajax({
			     url:'/addressmap/',
			     error:  function (xhr, ajaxOptions, thrownError) {				         
			         alert('Failed due to:'+ thrownError);
			       }
			  }).done(function(mappings){showMappings(mappings);});
		
	});
	
	function removeMapping(url){
		$.ajax({
			     url:'/addressmap/'+url,
			     type: 'DELETE',
			     error:  function (xhr, ajaxOptions, thrownError) {				         
				         alert('Failed due to:'+ thrownError);
				       }
			  }).done(function(mappings){showMappings(mappings);});
	}
	function showMappings(strMappings){
		var mappings = jQuery.parseJSON(strMappings);
		var mappingsDiv = $('#mappings');		
		mappingsDiv.empty();
		for(var from in mappings) {
			var to = mappings[from];
		    mappingsDiv.append('<span class="left">'+from+'</span>');
		    mappingsDiv.append('<span class="middle">'+to+'</span>');  		    	    
		    mappingsDiv.append('<button class="right" onclick="removeMapping('+"'"+from+"'"+');">Remove</button>');
		    mappingsDiv.append('<br></br>');
		}
	}
</script>
</head>
<body>


	<div class="table">
		<span class="left">From</input>
		</span> <span class="middle">To</input></span>

		<div id="mappings"></div>
		<span class="left"><input type="text" id="from"></input> </span>
		<span class="middle"><input type="text" id="to"></input></span>
		<button id="submitbtn" class="right">Submit</button>

	</div>

</body>
</html>